<%= render Containers::SettingComponent.new(project: @project) do |component| %>
  <% component.with(:body) do %>
    <div data-controller="toggle" data-toggle-attribute-value="hidden" class="mb-3">
      <div class="subnav d-flex flex-column flex-sm-row">
        <div class="subnav-search ml-0 col-12 col-sm-6 col-lg-5">
          <input
            type="search"
            name="name"
            class="form-control subnav-search-input width-full"
            value=""
            placeholder="Search people by name, email"
            aria-label="Search people by name, email"
            autocomplete="off"
          />
          <%= octicon "search", class: "subnav-search-icon" %>
        </div>
        <div class="mt-2 mt-sm-0 col-sm-6 col-lg-7 d-sm-flex flex-justify-end">
          <button data-action="click->toggle#toggle" class="btn btn-primary">Invite colleague</button>
        </div>
      </div>
      <form data-toggle-target="content" class="Box d-md-flex bg-gray p-3" hidden>
        <div class="form-group mt-0 mb-md-0 col-md-4 pr-md-3">
          <div class="form-group-header">
            <label for="">Email address</label>
          </div>
          <div class="form-group-body">
            <input
              type="text"
              placeholder="Email address"
              class="form-control width-full"
              required
            >
          </div>
        </div>
        <div class="form-group my-md-0 col-md-4 pr-md-3">
          <div class="form-group-header">
            <label for="">Role</label>
          </div>
          <div class="form-group-body">
            <select class="form-select form-control width-full" aria-label="Important decision">
              <option value="member" selected>Member</option>
              <option value="owner">Owner</option>
            </select>
          </div>
        </div>
        <div class="d-flex mt-md-4 col-md-4 flex-md-justify-end">
          <div class="d-flex flex-items-end flex-md-order-1 mr-2 mr-md-0">
            <button class="btn btn-primary">Send invitation</button>
          </div>
          <div class="d-flex flex-items-end mr-md-2">
            <button type="button" data-action="click->toggle#hide" class="btn">Cancel</button>
          </div>
        </div>
      </form>
    </div>
    <div class="Box">
      <div class="Box-header d-flex flex-justify-between flex-items-center">
        <h3 class="Box-title">
          People
        </h3>
        <div class="d-flex flex-justify-end position-relative">
          <details class="details-reset details-overlay">
            <summary class="btn-link text-gray" aria-haspopup="true">
              Filter <span class="dropdown-caret"></span>
            </summary>
            <div class="SelectMenu right-0">
              <div class="SelectMenu-modal">
                <header class="SelectMenu-header">
                  <h3 class="SelectMenu-title">Filter people</h3>
                </header>
                <div class="SelectMenu-list">
                  <button class="SelectMenu-item" role="menuitemcheckbox" aria-checked="true">
                    <%= octicon "check", class: "SelectMenu-icon SelectMenu-icon--check" %>
                    All
                  </button>
                  <button class="SelectMenu-item" role="menuitemcheckbox">
                    <%= octicon "check", class: "SelectMenu-icon SelectMenu-icon--check" %>
                    Owners
                  </button>
                  <button class="SelectMenu-item" role="menuitemcheckbox">
                    <%= octicon "check", class: "SelectMenu-icon SelectMenu-icon--check" %>
                    Members
                  </button>
                  <button class="SelectMenu-item" role="menuitemcheckbox">
                    <%= octicon "check", class: "SelectMenu-icon SelectMenu-icon--check" %>
                    Invitation pending
                  </button>
                </div>
              </div>
            </div>
          </details>
        </div>
      </div>
      <div>
        <% @memberships.each do |member| %>
          <div class="Box-row d-flex flex-items-center">
            <div class="d-flex flex-items-center col-9 col-md-4">
              <div>
                <%= render Users::AvatarComponent.new %>
              </div>
              <div class="ml-2">
                <span class="d-block h5"><%= member.full_name %></span>
                <span class="d-block f6 text-gray"><%= member.role.capitalize %></span>
              </div>
            </div>
            <div class="text-gray-light d-none d-md-flex flex-items-center col-md-5">
              <%= octicon "mail" %>
              <a href="mailto:<%= member.email_address %>" class="f5 ml-2"><%= member.email_address %></a>
            </div>
            <div class="col-3 d-flex flex-justify-end">
              <div class="d-none d-md-flex">
                <button class="btn-link text-gray f5">Demote</button>
                <button class="btn-link text-gray f5 ml-3">Remove</button>
              </div>
              <div class="d-md-none">
                <details class="dropdown details-reset details-overlay d-inline-block">
                  <summary class="btn" aria-haspopup="true">
                    <%= octicon "kebab-horizontal" %>
                  </summary>
                  <ul class="dropdown-menu dropdown-menu-sw">
                    <li><a class="dropdown-item" href="#url">Demote</a></li>
                    <li><a class="dropdown-item" href="#url">Remove</a></li>
                  </ul>
                </details>
              </div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>